[runtime]
sim_mode = true
auto_sim_on_hw_error = true
run_duration_s = 0
log_period_ms = 500

[modes]
estimator_mode = "python_dev"
controller_mode = "python_dev"

[threads]
control_hz = 250
actuator_hz = 50
imu_hz = 500
estimator_hz = 250
baro_hz = 20
control_priority = 90
actuator_priority = 85
imu_priority = 80
estimator_priority = 60
i2c_priority = 50
control_cpu = -1
imu_cpu = -1

[timeouts]
controller_fresh_ms = 16
controller_hold_ms = 100
estimator_fresh_ms = 16
estimator_hold_ms = 120
actuator_cmd_timeout_ms = 60
imu_stale_ms = 20
baro_stale_ms = 300

[ipc]
sensor_snapshot_shm = "/rt_sensor_snapshot_v1"
estimator_state_shm = "/rt_estimator_state_v1"
controller_command_shm = "/rt_controller_command_v1"
open_retry_ms = 50
open_retry_count = 200

[imu]
spi_device = "/dev/spidev0.0"
spi_speed_hz = 5000000
spi_mode = 3

[baro]
i2c_bus = "/dev/i2c-1"
i2c_address = 0x77
recovery_error_threshold = 5
recovery_backoff_ms = 100

[killswitch]
enabled = false
gpio = 17
nc_closed_value = 0
debounce_samples = 2
latch_on_trip = true

[actuator]
use_hardware = false
start_armed = false
latch_failsafe_on_io_errors = true
max_io_errors_before_latch = 3
frequency_hz = 50
slew_limit_norm_per_sec = 4.0

[servo0]
chip = 0
channel = 0
min_pwm_us = 1000
max_pwm_us = 2000
neutral_pwm_us = 1500
direction = 1.0
trim_norm = 0.0
min_norm = -1.0
max_norm = 1.0
failsafe_norm = 0.0

[servo1]
chip = 0
channel = 1
min_pwm_us = 1000
max_pwm_us = 2000
neutral_pwm_us = 1500
direction = 1.0
trim_norm = 0.0
min_norm = -1.0
max_norm = 1.0
failsafe_norm = 0.0

[servo2]
chip = 0
channel = 2
min_pwm_us = 1000
max_pwm_us = 2000
neutral_pwm_us = 1500
direction = 1.0
trim_norm = 0.0
min_norm = -1.0
max_norm = 1.0
failsafe_norm = 0.0

[servo3]
chip = 0
channel = 3
min_pwm_us = 1000
max_pwm_us = 2000
neutral_pwm_us = 1500
direction = 1.0
trim_norm = 0.0
min_norm = -1.0
max_norm = 1.0
failsafe_norm = 0.0

[estimator_cpp]
accel_complementary_gain = 0.02
baro_alt_gain = 0.1

[controller_cpp]
kp_roll = 1.2
kp_pitch = 1.2
kd_p = 0.15
max_deflection_norm = 0.8
